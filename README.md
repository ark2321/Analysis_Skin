# 基于多模态大模型与 MCP 的智能皮肤分析与产品推荐

## 前言  
随着人们对皮肤健康与美容需求的提升，便捷、精准的皮肤分析工具显得尤为重要。本项目 LittleSkin 最初依托 AILab Tool 微调模型进行指标化量化，后期切换至阿里云皮肤病理检测服务，并结合多轮对话与 RAG 检索增强生成（MCP），全流程实现「上传→分析→可视化→智能推荐」闭环，大幅降低使用门槛。

## 一、第一环节：皮肤分析  

### 1.1 指标化量化  
- 前端：Gradio 上传人脸图像，自动触发后端分析。  
- 初始模型：基于阿里云上的皮肤病理分析模型
- 进阶：多角度图片采集、数据匿名化（本地缓存后删除）。  
- 优化：切换至阿里云 DetectSkinDisease API，兼顾成本与并发，支持重试与降级模拟数据。

### 1.2 多轮对话
- 触发条件：当某项指标置信度 < 0.7，调用多轮对话模型（如 DialoGPT-large）确认用户描述。  
- 目标：在对话中逐步补全、修正、完善量化数据对外部因素（光照、模糊、遮挡）的影响。

### 1.3 流程示例  
```
[用户] 上传人脸照片  
→ 解析模型 生成初步指标数据  
→ 注入提示词模板  
→ 推理模型 多轮对话校验  
→ 输出：推理过程 → 最终量化值 → 图示验证 → 产品推荐  
```

## 二、第二环节：产品推荐  

### 2.1 关键词提取  
- 使用轻量级 Phi4-mini-instruct 模型，从推理文本中提取高频关键词列表。  
- 考量：NVIDIA NIM Token 窗口限制与并发量，选用 DeepSeek-R1-0528 模型辅助下达 MCP 搜索指令。

### 2.2 MCP 电商抓取工具  
- 设计半自动化脚本：前端按钮跳转至京东扫码登录，保留 Cookies。  
- MCP Tool：将关键词注入京东搜索 URL，执行自定义 JS 脚本抓取商品组件信息。  
- 风险与合规：建议对接京东开放 API 或使用官方授权接口，避免反爬虫风险。

### 2.3 前端集成  
- Gradio 自定义组件：图片上传、文本对话、登录按钮、推荐列表。  
- 界面示例：  
  1. 上传区域（支持拖拽、粘贴）  
  2. 多标签 Tab 显示推理过程／真实输出  
  3. 产品推荐轮播卡片  

## 三、项目部署与团队协作  

### 3.1 部署方案  
- 服务器：阿里云 VPS 或 NVIDIA NIM 实例。  
- 步骤：  
  1. 安装依赖（Gradio、LangChain、OpenAI、OSS2、阿里云 SDK 等）  
  2. 配置 `config.yaml`：API Key、OSS Bucket、模型端点  
  3. 启动服务：`python app.py` 或容器化部署  

### 3.2 团队分工  
- **ark2321**：整体项目的设计与构建
- **百乐航**：小秘书构建交互界面  

## 后言  
LittleSkin 致力于「让用户成为自己喜欢的人」，未来将持续迭代：  
- 引入更多皮肤病变类型与多模态分析  
- 深化 RAG 知识库、开放社区贡献  
- 移动端原生化支持  
- 商业化对接更多电商与护肤品牌 API  

欢迎访问项目仓库、提交 Issue，与我们一起打造更智能的皮肤健康管理工具！
